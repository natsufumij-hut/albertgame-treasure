[gd_scene load_steps=14 format=3 uid="uid://d00uitskqir8t"]

[ext_resource type="Script" path="res://level/level_mechan.gd" id="1_gxeo4"]
[ext_resource type="TileSet" uid="uid://drvfmo2x0n0i" path="res://level/tile_set.tres" id="1_nvn26"]
[ext_resource type="Script" path="res://level/tile_animated.gd" id="2_i0tuy"]
[ext_resource type="PackedScene" uid="uid://c4eprnllagbxq" path="res://player/player.tscn" id="3_wdof1"]
[ext_resource type="PackedScene" uid="uid://b3s6tvhj3mq14" path="res://ui/hud.tscn" id="4_84irw"]
[ext_resource type="PackedScene" uid="uid://b4nmw2lpleqln" path="res://enemy/slim.tscn" id="4_odob2"]
[ext_resource type="PackedScene" uid="uid://ciya1ykam4rce" path="res://enemy/swarm.tscn" id="5_5whhs"]
[ext_resource type="Texture2D" uid="uid://byqmlyof4q6t4" path="res://asset/Backgrounds/bg_grasslands.png" id="6_eqk4n"]
[ext_resource type="Texture2D" uid="uid://ph58hdih3cmf" path="res://asset/items_spritesheet.png" id="6_ud8g3"]
[ext_resource type="AudioStream" uid="uid://cchsg4p8q6c6l" path="res://asset/audio/green.mp3" id="7_pb1qt"]

[sub_resource type="AtlasTexture" id="AtlasTexture_i3x0i"]
atlas = ExtResource("6_ud8g3")
region = Rect2(0, 73, 129, 71)

[sub_resource type="AtlasTexture" id="AtlasTexture_qh46l"]
atlas = ExtResource("6_ud8g3")
region = Rect2(0, 146, 128, 71)

[sub_resource type="AtlasTexture" id="AtlasTexture_rb8rh"]
atlas = ExtResource("6_ud8g3")
region = Rect2(0, 146, 128, 71)

[node name="Level4" type="Node2D"]
script = ExtResource("1_gxeo4")

[node name="TileMap" type="TileMap" parent="."]
position = Vector2(30, 67)
tile_set = ExtResource("1_nvn26")
format = 2
layer_0/name = "地形"
layer_0/tile_data = PackedInt32Array(1441791, 196612, 0, 1507327, 131076, 1, 1572863, 131076, 1, 1638399, 131076, 1, 1376256, 196612, 0, 1441792, 131076, 1, 1507328, 131076, 1, 1572864, 131076, 1, 1376257, 196612, 0, 1441793, 131076, 1, 1507329, 131076, 1, 1572865, 131076, 1, 1376258, 196612, 0, 1441794, 131076, 1, 1507330, 131076, 1, 1572866, 131076, 1, 1376259, 196612, 0, 1441795, 131076, 1, 1507331, 131076, 1, 1572867, 131076, 1, 1376260, 196612, 0, 1441796, 131076, 1, 1507332, 131076, 1, 1572868, 131076, 1, 1376261, 196612, 0, 1441797, 131076, 1, 1507333, 131076, 1, 1572869, 131076, 1, 1376262, 196612, 0, 1441798, 131076, 1, 1507334, 131076, 1, 1572870, 131076, 1, 1376263, 196612, 0, 1441799, 131076, 1, 1507335, 131076, 1, 1572871, 131076, 1, 1376264, 458756, 1, 1441800, 131076, 1, 1507336, 131076, 1, 1572872, 131076, 1, 1376265, 196612, 0, 1441801, 131076, 1, 1507337, 131076, 1, 1572873, 131076, 1, 1376266, 196612, 0, 1441802, 131076, 1, 1507338, 131076, 1, 1572874, 131076, 1, 1376267, 196612, 0, 1441803, 131076, 1, 1507339, 131076, 1, 1572875, 131076, 1, 1376268, 196612, 0, 1441804, 131076, 1, 1507340, 131076, 1, 1572876, 131076, 1, 1376269, 196612, 0, 1441805, 131076, 1, 1507341, 131076, 1, 1572877, 131076, 1, 1376270, 196612, 0, 1441806, 131076, 1, 1507342, 131076, 1, 1572878, 131076, 1, 1376271, 196612, 0, 1441807, 131076, 1, 1507343, 131076, 1, 1572879, 131076, 1, 1376272, 393220, 0, 1441808, 393220, 1, 1507344, 131076, 1, 1572880, 131076, 1, 1441809, 196612, 0, 1507345, 131076, 1, 1572881, 131076, 1, 1441810, 327684, 1, 1441825, 196612, 0, 1507361, 131076, 1, 1572897, 131076, 1, 1441826, 458756, 1, 1507362, 131076, 1, 1572898, 131076, 1, 1441827, 131076, 1, 1507363, 131076, 1, 1572899, 131076, 1, 1441828, 393220, 1, 1507364, 131076, 1, 1572900, 131076, 1, 1441829, 327684, 1, 1572903, 196612, 0, 1572904, 196612, 0, 1572905, 196612, 0, 1441834, 131076, 0, 1572906, 196612, 0, 1441835, 196612, 0, 1572907, 196612, 0, 1441836, 196612, 0, 1507372, 131076, 1, 1572908, 131076, 1, 1441837, 196612, 0, 1507373, 131076, 1, 1572909, 131076, 1, 1441838, 131076, 1, 1507374, 131076, 1, 1572910, 131076, 1, 1376303, 131076, 1, 1441839, 131076, 1, 1507375, 131076, 1, 1572911, 131076, 1, 1376304, 131076, 1, 1441840, 131076, 1, 1507376, 131076, 1, 1572912, 131076, 1, 1376305, 131076, 1, 1441841, 131076, 1, 1507377, 131076, 1, 1572913, 131076, 1, 1376306, 131076, 1, 1441842, 131076, 1, 1507378, 131076, 1, 1572914, 131076, 1, 1376307, 131076, 1, 1441843, 131076, 1, 1507379, 131076, 1, 1572915, 131076, 1, 1376308, 131076, 1, 1441844, 131076, 1, 1507380, 131076, 1, 1572916, 131076, 1, 1376309, 196612, 0, 1441845, 131076, 1, 1507381, 131076, 1, 1572917, 131076, 1, 1441846, 393220, 1, 1507382, 131076, 1, 1572918, 131076, 1, 1441847, 196612, 0, 1507383, 131076, 1, 1572919, 131076, 1, 1441848, 196612, 0, 1507384, 131076, 1, 1572920, 131076, 1, 1441849, 196612, 0, 1507385, 131076, 1, 1572921, 131076, 1, 1376290, 458756, 0, 1441824, 4, 1, 1310728, 458756, 0, 1310729, 196612, 0, 1245194, 458756, 0, 1245195, 196612, 0, 1245196, 196612, 0, 1245197, 393220, 0, 1310734, 393220, 0, 1310733, 393220, 1, 1310730, 458756, 1, 1310731, 131076, 1, 1310732, 131076, 1, 1376291, 196612, 0, 1376292, 393220, 0, 1572901, 196612, 0, 1572902, 196612, 0, 1376302, 458756, 0, 1310767, 458756, 0, 1310768, 196612, 0, 1245233, 458756, 0, 1179698, 458756, 0, 1179699, 196612, 0, 1179700, 196612, 0, 1179701, 393220, 0, 1245238, 327684, 1, 1376310, 393220, 0, 1245237, 393220, 1, 1245236, 131076, 1, 1245235, 131076, 1, 1310771, 131076, 1, 1310770, 131076, 1, 1310772, 131076, 1, 1245234, 458756, 1, 1310769, 458756, 1, 1441850, 131076, 1, 1245224, 524292, 1, 1245225, 589828, 1, 1245223, 589828, 0, 1310741, 524292, 1, 1310742, 589828, 1, 1310740, 589828, 0, 1179674, 524292, 1, 1179675, 524292, 1, 1179676, 524292, 1, 1179677, 524292, 1, 1179678, 589828, 1, 1179673, 589828, 0, 1245208, 524292, 0, 1638418, 131076, 1, 1638419, 131076, 1, 1638420, 131076, 1, 1638421, 131076, 1, 1638422, 131076, 1, 1638423, 131076, 1, 1638424, 131076, 1, 1638425, 131076, 1, 1638426, 131076, 1, 1638427, 131076, 1, 1638428, 131076, 1, 1638429, 131076, 1, 1638430, 131076, 1, 1638431, 131076, 1, 1638432, 131076, 1, 917501, 131076, 1, 983037, 131076, 1, 1048573, 131076, 1, 1114109, 131076, 1, 1179645, 131076, 1, 1245181, 131076, 1, 1310717, 131076, 1, 1376253, 131076, 1, 917502, 131076, 1, 983038, 131076, 1, 1048574, 131076, 1, 1114110, 131076, 1, 1179646, 131076, 1, 1245182, 131076, 1, 1310718, 131076, 1, 1376254, 131076, 1, 1441789, 131076, 1, 1507325, 131076, 1, 1572861, 131076, 1, 1638397, 131076, 1, 1441790, 131076, 1, 1507326, 131076, 1, 1572862, 131076, 1, 1638398, 131076, 1, 852026, 131076, 1, 917562, 131076, 1, 983098, 131076, 1, 1048634, 131076, 1, 1114170, 131076, 1, 1179706, 131076, 1, 1245242, 131076, 1, 1310778, 131076, 1, 1376314, 131076, 1, 1507386, 131076, 1, 1572922, 131076, 1, 852027, 131076, 1, 917563, 131076, 1, 983099, 131076, 1, 1048635, 131076, 1, 1114171, 131076, 1, 1179707, 131076, 1, 1245243, 131076, 1, 1310779, 131076, 1, 1376315, 131076, 1, 1441851, 131076, 1, 1507387, 131076, 1, 1572923, 131076, 1)
layer_1/name = "装饰"
layer_1/z_index = 2
layer_1/tile_data = PackedInt32Array(1310722, 65540, 2, 1310723, 131076, 2, 1179659, 4, 2, 1376312, 131076, 2, 1376311, 65540, 2, 1376313, 196612, 2, 1376300, 262148, 2, 1376299, 65540, 2, 1376301, 196612, 2, 1507370, 65540, 2, 1507371, 393220, 2, 1507365, 393220, 3, 1507366, 196612, 2, 1507368, 131076, 2, 1507367, 65540, 2, 1507369, 196612, 2, 1310755, 4, 2, 1310735, 4, 2, 1245184, 720900, 6, 1245185, 589828, 6, 1179648, 720900, 5, 1179649, 589828, 6, 1245186, 786436, 6, 1179650, 786436, 5, 1114113, 4, 6, 1310721, 131076, 6, 1310724, 196612, 2, 1310725, 131076, 5, 1179660, 4, 4, 1245188, 524292, 6, 1179653, 589828, 6, 1179652, 524292, 6, 1245190, 655364, 6, 1179654, 655364, 6, 1114118, 655364, 6, 1114116, 524292, 6, 1114117, 589828, 5, 1245189, 589828, 5, 1048581, 4, 5, 1245205, 4, 2, 1114138, 65540, 2, 1114139, 131076, 2, 1114140, 196612, 2, 1179688, 4, 2)
layer_2/name = "陷阱"
layer_2/tile_data = PackedInt32Array(1376273, 196612, 3, 1507367, 262148, 3, 1245206, 65540, 4)
layer_3/name = "干涉地形"
layer_3/z_index = -1
layer_3/tile_data = PackedInt32Array(1441810, 655364, 2, 1441811, 655364, 2, 1441812, 655364, 2, 1441813, 655364, 2, 1441814, 655364, 2, 1441815, 655364, 2, 1441816, 655364, 2, 1441817, 655364, 2, 1441818, 655364, 2, 1441819, 655364, 2, 1441820, 655364, 2, 1441821, 655364, 2, 1441822, 655364, 2, 1441823, 655364, 2, 1441824, 655364, 2, 1507346, 655364, 3, 1572882, 655364, 3, 1507347, 655364, 3, 1572883, 655364, 3, 1507348, 655364, 3, 1572884, 655364, 3, 1507349, 655364, 3, 1572885, 655364, 3, 1507350, 655364, 3, 1572886, 655364, 3, 1507351, 655364, 3, 1572887, 655364, 3, 1507352, 655364, 3, 1572888, 655364, 3, 1507353, 655364, 3, 1572889, 655364, 3, 1507354, 655364, 3, 1572890, 655364, 3, 1507355, 655364, 3, 1572891, 655364, 3, 1507356, 655364, 3, 1572892, 655364, 3, 1507357, 655364, 3, 1572893, 655364, 3, 1507358, 655364, 3, 1572894, 655364, 3, 1507359, 655364, 3, 1572895, 655364, 3, 1507360, 655364, 3, 1572896, 655364, 3, 1310728, 851972, 5, 1310734, 589828, 4, 1310763, 720900, 2, 1376299, 720900, 3, 1310764, 786436, 2, 1376300, 786436, 3, 1310765, 851972, 2, 1376301, 851972, 3, 1507365, 851972, 4)
layer_4/name = "可收集道具"
layer_4/tile_data = PackedInt32Array(1114142, 1, 1, 1245198, 262146, 2, 1310735, 262146, 2, 1245232, 262146, 2, 1179697, 262146, 2, 1310766, 262146, 2, 1507371, 458754, 1, 1376301, 65538, 1, 1376289, 65538, 1, 1048616, 458754, 1)
layer_5/name = "可交互道具"
layer_5/tile_data = PackedInt32Array(1376313, 589824, 262150, 1310777, 589824, 5)
layer_6/name = "干涉形道具"
layer_6/tile_data = PackedInt32Array(983067, 0, 1, 983068, 0, 1, 1048617, 0, 1)
script = ExtResource("2_i0tuy")

[node name="TileAnimatedTimer" type="Timer" parent="TileMap"]
wait_time = 0.5
autostart = true

[node name="Enemy" type="Node2D" parent="."]

[node name="Slim" parent="Enemy" node_paths=PackedStringArray("p1", "p2") instance=ExtResource("4_odob2")]
position = Vector2(2046, 1323)
p1 = NodePath("../Marker2D")
p2 = NodePath("../Marker2D2")

[node name="Marker2D" type="Marker2D" parent="Enemy"]
position = Vector2(1813, 1302)

[node name="Marker2D2" type="Marker2D" parent="Enemy"]
position = Vector2(2159, 1302)

[node name="Swarm" parent="Enemy" node_paths=PackedStringArray("p1", "p2") instance=ExtResource("5_5whhs")]
position = Vector2(2890, 1736)
p1 = NodePath("../Marker2D3")
p2 = NodePath("../Marker2D4")

[node name="Marker2D3" type="Marker2D" parent="Enemy"]
position = Vector2(2654, 1709)

[node name="Marker2D4" type="Marker2D" parent="Enemy"]
position = Vector2(3142, 1709)

[node name="Player" parent="." instance=ExtResource("3_wdof1")]
position = Vector2(224, 1456)

[node name="Camera2D" type="Camera2D" parent="Player"]
limit_left = 0
limit_top = 1000
limit_right = 4090
limit_bottom = 1800
limit_smoothed = true
position_smoothing_enabled = true
drag_horizontal_enabled = true

[node name="bullets" type="Node2D" parent="."]

[node name="Hud" parent="." instance=ExtResource("4_84irw")]

[node name="Paral" type="ParallaxBackground" parent="."]

[node name="Sky" type="ParallaxLayer" parent="Paral"]
motion_scale = Vector2(0.2, 0.2)
motion_mirroring = Vector2(1500, 700)

[node name="Bg" type="Sprite2D" parent="Paral/Sky"]
position = Vector2(647, 437)
scale = Vector2(6.66406, 3.42188)
texture = ExtResource("6_eqk4n")

[node name="Cloud" type="ParallaxLayer" parent="Paral"]
motion_scale = Vector2(0.6, 0.6)
motion_mirroring = Vector2(1500, 800)

[node name="Sprite2D" type="Sprite2D" parent="Paral/Cloud"]
position = Vector2(80, 364)
texture = SubResource("AtlasTexture_i3x0i")

[node name="Sprite2D2" type="Sprite2D" parent="Paral/Cloud"]
position = Vector2(260, 192)
texture = SubResource("AtlasTexture_qh46l")

[node name="Sprite2D3" type="Sprite2D" parent="Paral/Cloud"]
position = Vector2(370, 312)
texture = SubResource("AtlasTexture_rb8rh")

[node name="Sprite2D5" type="Sprite2D" parent="Paral/Cloud"]
position = Vector2(438, 472)
texture = SubResource("AtlasTexture_rb8rh")

[node name="Sprite2D4" type="Sprite2D" parent="Paral/Cloud"]
position = Vector2(408, 270)
texture = SubResource("AtlasTexture_rb8rh")

[node name="BGM" type="AudioStreamPlayer" parent="."]
stream = ExtResource("7_pb1qt")
autoplay = true

[node name="Tricks" type="Node2D" parent="."]

[connection signal="timeout" from="TileMap/TileAnimatedTimer" to="TileMap" method="markAnimated"]
