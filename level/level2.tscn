[gd_scene load_steps=11 format=3 uid="uid://c2x51iwfqo3l"]

[ext_resource type="TileSet" uid="uid://drvfmo2x0n0i" path="res://level/tile_set.tres" id="1_2g0v8"]
[ext_resource type="Script" path="res://level/tile_animated.gd" id="2_dpq78"]
[ext_resource type="PackedScene" uid="uid://c4eprnllagbxq" path="res://player/player.tscn" id="3_nj6e3"]
[ext_resource type="PackedScene" uid="uid://b3s6tvhj3mq14" path="res://ui/hud.tscn" id="4_c87y7"]
[ext_resource type="Texture2D" uid="uid://cnlqi6jkxchbs" path="res://asset/bg.png" id="5_tup3f"]
[ext_resource type="Texture2D" uid="uid://ph58hdih3cmf" path="res://asset/items_spritesheet.png" id="6_6w8xe"]
[ext_resource type="AudioStream" uid="uid://cchsg4p8q6c6l" path="res://asset/audio/green.mp3" id="7_xefk3"]

[sub_resource type="AtlasTexture" id="AtlasTexture_q6txd"]
atlas = ExtResource("6_6w8xe")
region = Rect2(0, 73, 129, 71)

[sub_resource type="AtlasTexture" id="AtlasTexture_a7rhe"]
atlas = ExtResource("6_6w8xe")
region = Rect2(0, 146, 128, 71)

[sub_resource type="AtlasTexture" id="AtlasTexture_mynb2"]
atlas = ExtResource("6_6w8xe")
region = Rect2(0, 146, 128, 71)

[node name="Level2" type="Node2D"]

[node name="TileMap" type="TileMap" parent="."]
position = Vector2(30, 67)
tile_set = ExtResource("1_2g0v8")
format = 2
layer_0/name = "地形"
layer_1/name = "装饰"
layer_1/tile_data = PackedInt32Array()
layer_2/name = "陷阱"
layer_2/tile_data = PackedInt32Array()
layer_3/name = "干涉地形"
layer_3/tile_data = PackedInt32Array()
layer_4/name = "可收集道具"
layer_4/tile_data = PackedInt32Array()
layer_5/name = "可交互道具"
layer_5/tile_data = PackedInt32Array()
layer_6/name = "干涉形道具"
layer_6/tile_data = PackedInt32Array()
script = ExtResource("2_dpq78")

[node name="TileAnimatedTimer" type="Timer" parent="TileMap"]
wait_time = 0.5
autostart = true

[node name="Player" parent="." instance=ExtResource("3_nj6e3")]
position = Vector2(232, 402)

[node name="Camera2D" type="Camera2D" parent="Player"]
limit_left = 50
limit_top = -450
limit_right = 3850
limit_bottom = 695
position_smoothing_enabled = true
drag_horizontal_enabled = true

[node name="Hud" parent="." instance=ExtResource("4_c87y7")]

[node name="Paral" type="ParallaxBackground" parent="."]

[node name="Sky" type="ParallaxLayer" parent="Paral"]
motion_scale = Vector2(0.2, 0.2)
motion_mirroring = Vector2(1500, 700)

[node name="Bg" type="Sprite2D" parent="Paral/Sky"]
position = Vector2(647, 437)
scale = Vector2(6.66406, 3.42188)
texture = ExtResource("5_tup3f")

[node name="Cloud" type="ParallaxLayer" parent="Paral"]
motion_scale = Vector2(0.6, 0.6)
motion_mirroring = Vector2(1500, 800)

[node name="Sprite2D" type="Sprite2D" parent="Paral/Cloud"]
position = Vector2(80, 364)
texture = SubResource("AtlasTexture_q6txd")

[node name="Sprite2D2" type="Sprite2D" parent="Paral/Cloud"]
position = Vector2(260, 192)
texture = SubResource("AtlasTexture_a7rhe")

[node name="Sprite2D3" type="Sprite2D" parent="Paral/Cloud"]
position = Vector2(370, 312)
texture = SubResource("AtlasTexture_mynb2")

[node name="Sprite2D5" type="Sprite2D" parent="Paral/Cloud"]
position = Vector2(438, 472)
texture = SubResource("AtlasTexture_mynb2")

[node name="Sprite2D4" type="Sprite2D" parent="Paral/Cloud"]
position = Vector2(408, 270)
texture = SubResource("AtlasTexture_mynb2")

[node name="BGM" type="AudioStreamPlayer" parent="."]
stream = ExtResource("7_xefk3")
autoplay = true

[connection signal="timeout" from="TileMap/TileAnimatedTimer" to="TileMap" method="markAnimated"]
